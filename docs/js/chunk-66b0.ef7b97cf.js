(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66b0"],{"56b0":function(t,e,a){"use strict";var n=a("fcbc"),r=a.n(n);r.a},"9a8e":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{"margin-top":"20px"}},[a("Card",[a("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:function(e){t.openEdit(null)}}},[t._v("新增")]),t._v("  \n      "),0!==this.parentId?a("Button",{attrs:{type:"success",icon:"ios-arrow-back"},on:{click:function(e){t.goBack()}}},[t._v("返回上级")]):t._e()],1),a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("#组织机构列表")]),a("div",{staticClass:"moreco-table"},[a("Table",{attrs:{border:"",stripe:"",columns:t.columns,data:t.pageData}})],1),a("Page",{attrs:{current:t.currPage,"page-size":t.pageSize,total:t.totalCount,size:"small","show-sizer":""}})],1)],1),a("Modal",{attrs:{title:"编辑组织机构"},model:{value:t.editShow,callback:function(e){t.editShow=e},expression:"editShow"}},[a("Form",{attrs:{model:t.deptObj,"label-width":60}},[a("FormItem",{attrs:{label:"id",hidden:""}},[a("Input",{model:{value:t.deptObj.id,callback:function(e){t.$set(t.deptObj,"id",e)},expression:"deptObj.id"}})],1),a("FormItem",{attrs:{label:"parentId",hidden:""}},[a("Input",{model:{value:t.deptObj.parentId,callback:function(e){t.$set(t.deptObj,"parentId",e)},expression:"deptObj.parentId"}})],1),a("FormItem",{attrs:{label:"上级机构"}},[a("Input",{attrs:{disabled:"disabled"},model:{value:this.parentName,callback:function(e){t.$set(this,"parentName",e)},expression:"this.parentName"}})],1),a("FormItem",{attrs:{label:"名称"}},[a("Input",{attrs:{placeholder:"请输入名称"},model:{value:t.deptObj.name,callback:function(e){t.$set(t.deptObj,"name",e)},expression:"deptObj.name"}})],1),a("FormItem",{attrs:{label:"排序"}},[a("Input",{attrs:{placeholder:"请输入排序值"},model:{value:t.deptObj.orderNum,callback:function(e){t.$set(t.deptObj,"orderNum",e)},expression:"deptObj.orderNum"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:t.closeEdit}},[t._v("取消")]),a("Button",{attrs:{type:"primary",loading:t.editLoading},on:{click:t.save}},[t._v("保存")])],1)],1)],1)},r=[],o=(a("7f7f"),a("f57d")),i={data:function(){var t=this;return{columns:[{title:"名称",key:"name",fixed:"left"},{title:"排序",key:"orderNum"},{title:"操作",key:"action",width:200,align:"center",fixed:"right",render:function(e,a){return e("div",[e("Button",{props:{type:"success",size:"small"},on:{click:function(){t.parentIdStack.push(t.parentId),t.parentNameStack.push(t.parentName),t.parentId=a.row.id,t.parentName=a.row.name,t.doQuery()}}},"管理下级"),e("span",{}," "),e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.openEdit(a.row.id)}}},"修改"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.remove(a.row.id)}}},"删除")])}}],pageData:[],currPage:1,pageSize:10,totalCount:0,queryObj:{},editShow:!1,editLoading:!1,deptObj:{},parentId:0,parentName:"顶级部门",parentIdStack:[],parentNameStack:[],menuTypes:[]}},methods:{doQuery:function(){var t=this;this.queryObj.parentId=this.parentId,Object(o["c"])(this.currPage,this.queryObj).then(function(e){0===e.data.code&&(t.currPage=e.data.result.currPage,t.pageSize=e.data.result.pageSize,t.totalCount=e.data.result.totalCount,t.pageData=e.data.result.list)})},openEdit:function(t){var e=this;null!==t?Object(o["b"])(t).then(function(t){0===t.data.code&&(e.deptObj=t.data.result)}):this.deptObj={},this.editShow=!0},closeEdit:function(){this.editShow=!1,this.editLoading=!1},save:function(){var t=this;this.editLoading=!0,this.deptObj.parentId=this.parentId,Object(o["d"])(this.deptObj).then(function(e){0===e.data.code&&(t.editShow=!1,t.doQuery())}).finally(function(){t.editLoading=!1})},remove:function(t){var e=this;Object(o["a"])(t).then(function(t){0===t.data.code&&e.doQuery()})},goBack:function(){this.parentId=this.parentIdStack.pop(),this.parentName=this.parentNameStack.pop(),this.doQuery()}},mounted:function(){this.doQuery()}},d=i,s=(a("56b0"),a("2877")),u=Object(s["a"])(d,n,r,!1,null,null,null);u.options.__file="dept.vue";e["default"]=u.exports},f57d:function(t,e,a){"use strict";a.d(e,"c",function(){return r}),a.d(e,"e",function(){return o}),a.d(e,"b",function(){return i}),a.d(e,"d",function(){return d}),a.d(e,"a",function(){return s});var n=a("66df"),r=function(t,e){return n["a"].request({url:"rbac/dept/page/"+t,method:"GET",params:e})},o=function(){return n["a"].request({url:"rbac/dept/tree",method:"GET"})},i=function(t){return n["a"].request({url:"rbac/dept/detail/"+t,method:"GET"})},d=function(t){return n["a"].request({url:"rbac/dept/save",method:"POST",data:t})},s=function(t){return n["a"].request({url:"rbac/dept/delete/"+t,method:"DELETE"})}},fcbc:function(t,e,a){}}]);