(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29aa"],{"02c1":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Card",[r("Form",{staticClass:"query-form",attrs:{model:e.queryObj,"label-width":80}},[r("Row",[r("Col",{attrs:{span:"8"}},[r("FormItem",{attrs:{label:"用户名"}},[r("Input",{attrs:{placeholder:"请输入用户名"},model:{value:e.queryObj.username,callback:function(t){e.$set(e.queryObj,"username",t)},expression:"queryObj.username"}})],1)],1),r("Col",{attrs:{span:"8"}},[r("FormItem",{attrs:{label:"真实姓名"}},[r("Input",{attrs:{placeholder:"请输入真实姓名"},model:{value:e.queryObj.realName,callback:function(t){e.$set(e.queryObj,"realName",t)},expression:"queryObj.realName"}})],1)],1),r("Col",{attrs:{span:"8"}},[r("FormItem",{attrs:{label:"邮箱"}},[r("Input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.queryObj.email,callback:function(t){e.$set(e.queryObj,"email",t)},expression:"queryObj.email"}})],1)],1)],1),r("Row",[r("Col",{attrs:{span:"8"}},[r("FormItem",{attrs:{label:"电话"}},[r("Input",{attrs:{placeholder:"请输入电话"},model:{value:e.queryObj.mobile,callback:function(t){e.$set(e.queryObj,"mobile",t)},expression:"queryObj.mobile"}})],1)],1)],1)],1),r("div",{staticClass:"query-btns"},[r("Button",{attrs:{type:"primary",icon:"md-search"},on:{click:e.doQuery}},[e._v("查询")]),r("Button",{attrs:{icon:"md-refresh"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),r("div",{staticStyle:{"margin-top":"20px"}},[r("Card",[r("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:function(t){e.openEdit(null)}}},[e._v("新增")])],1),r("Card",[r("p",{attrs:{slot:"title"},slot:"title"},[e._v("#用户列表")]),r("div",{staticClass:"moreco-table"},[r("Table",{attrs:{border:"",stripe:"",columns:e.columns,data:e.pageData}})],1),r("Page",{attrs:{current:e.currPage,"page-size":e.pageSize,total:e.totalCount,size:"small","show-sizer":""}})],1)],1),r("Modal",{attrs:{title:"编辑用户"},model:{value:e.editShow,callback:function(t){e.editShow=t},expression:"editShow"}},[r("Form",{attrs:{model:e.userObj,"label-width":60}},[r("FormItem",{attrs:{label:"id",hidden:""}},[r("Input",{model:{value:e.userObj.id,callback:function(t){e.$set(e.userObj,"id",t)},expression:"userObj.id"}})],1),r("FormItem",{attrs:{label:"用户名"}},[r("Input",{attrs:{disabled:null!==e.userObj.id&&void 0!==e.userObj.id,placeholder:"请输入用户名"},model:{value:e.userObj.username,callback:function(t){e.$set(e.userObj,"username",t)},expression:"userObj.username"}})],1),r("FormItem",{attrs:{label:"真实姓名"}},[r("Input",{attrs:{placeholder:"请输入真实姓名"},model:{value:e.userObj.realName,callback:function(t){e.$set(e.userObj,"realName",t)},expression:"userObj.realName"}})],1),r("FormItem",{attrs:{label:"邮箱"}},[r("Input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.userObj.email,callback:function(t){e.$set(e.userObj,"email",t)},expression:"userObj.email"}})],1),r("FormItem",{attrs:{label:"电话"}},[r("Input",{attrs:{placeholder:"请输入电话"},model:{value:e.userObj.mobile,callback:function(t){e.$set(e.userObj,"mobile",t)},expression:"userObj.mobile"}})],1),r("FormItem",{attrs:{label:"授权角色"}},[r("Select",{attrs:{multiple:"",filterable:"",placeholder:"请选择角色"},model:{value:e.userObj.roleIds,callback:function(t){e.$set(e.userObj,"roleIds",t)},expression:"userObj.roleIds"}},e._l(e.roles,function(t){return r("Option",{key:t.key,attrs:{value:t.id}},[e._v(e._s(t.name))])}))],1),r("FormItem",{attrs:{label:"所属部门",hidden:""}},[r("Input",{model:{value:e.userObj.deptId,callback:function(t){e.$set(e.userObj,"deptId",t)},expression:"userObj.deptId"}})],1),r("FormItem",{attrs:{label:"所属部门"}},[r("Tree",{ref:"userDeptTree",attrs:{data:e.userDepts}})],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{on:{click:e.closeEdit}},[e._v("取消")]),r("Button",{attrs:{type:"primary",loading:e.editLoading},on:{click:e.save}},[e._v("保存")])],1)],1)],1)},n=[],u=(r("7f7f"),r("66df")),l=function(e,t){return u["a"].request({url:"rbac/user/page/"+e,method:"GET",params:t})},s=function(e){return u["a"].request({url:"rbac/user/detail/"+e,method:"GET"})},o=function(e){return u["a"].request({url:"rbac/user/save",method:"POST",data:e})},i=r("f57d"),d=r("c557"),c={data:function(){var e=this;return{columns:[{title:"用户名",key:"username",fixed:"left"},{title:"真实姓名",key:"realName"},{title:"所属部门",key:"deptName"},{title:"邮箱",key:"email"},{title:"手机号",key:"mobile"},{title:"状态",key:"status",render:function(e,t){return e("div",null,t.row.dataMap.status)}},{title:"创建时间",key:"createdDate",render:function(e,t){return e("div",null,t.row.dataMap.createdDate)}},{title:"操作",key:"action",width:180,align:"center",fixed:"right",render:function(t,r){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.openEdit(r.row.id)}}},"修改")])}}],pageData:[],currPage:1,pageSize:10,totalCount:0,queryObj:{},editShow:!1,editLoading:!1,userObj:{},userDepts:[],roles:[]}},methods:{doQuery:function(){var e=this;l(this.currPage,this.queryObj).then(function(t){0===t.data.code&&(e.currPage=t.data.result.currPage,e.pageSize=t.data.result.pageSize,e.totalCount=t.data.result.totalCount,e.pageData=t.data.result.list)}).catch(function(e){console.log(e)})},resetQuery:function(){this.queryObj={}},openEdit:function(e){var t=this;null!==e?s(e).then(function(e){0===e.data.code&&(t.userObj=e.data.result)}).then(this.permInit):(this.userObj={},this.permInit()),this.editShow=!0},closeEdit:function(){this.editShow=!1,this.editLoading=!1},save:function(){var e=this;this.editLoading=!0;var t=this.$refs.userDeptTree.getSelectedNodes();null!==t&&t.length>0&&(this.userObj.deptId=t[0].id),o(this.userObj).then(function(t){0===t.data.code&&(e.editShow=!1,e.doQuery())}).finally(function(){e.editLoading=!1})},permInit:function(){var e=this;Object(i["e"])().then(function(t){0===t.data.code&&(e.userDepts=e.convert2DeptTree(t.data.result))}),Object(d["c"])().then(function(t){0===t.data.code&&(e.roles=t.data.result)})},convert2DeptTree:function(e){var t=[];for(var r in e){var a=e[r],n={};n.id=a.id,n.title=a.name,null!=this.userObj.deptId&&(n.selected=this.userObj.deptId===a.id,n.selected&&(n.expand=!0)),null!==a.children&&(n.children=this.convert2DeptTree(a.children)),t.push(n)}return t}},mounted:function(){this.doQuery()}},m=c,b=(r("c32b"),r("2877")),p=Object(b["a"])(m,a,n,!1,null,null,null);p.options.__file="user.vue";t["default"]=p.exports},1692:function(e,t,r){},c32b:function(e,t,r){"use strict";var a=r("1692"),n=r.n(a);n.a},c557:function(e,t,r){"use strict";r.d(t,"d",function(){return n}),r.d(t,"c",function(){return u}),r.d(t,"b",function(){return l}),r.d(t,"e",function(){return s}),r.d(t,"a",function(){return o});var a=r("66df"),n=function(e){return a["a"].request({url:"rbac/role/page/"+e,method:"GET"})},u=function(){return a["a"].request({url:"rbac/role/list",method:"GET"})},l=function(e){return a["a"].request({url:"rbac/role/detail/"+e,method:"GET"})},s=function(e){return a["a"].request({url:"rbac/role/save",method:"POST",data:e})},o=function(e){return a["a"].request({url:"rbac/role/delete/"+e,method:"DELETE"})}},f57d:function(e,t,r){"use strict";r.d(t,"c",function(){return n}),r.d(t,"e",function(){return u}),r.d(t,"b",function(){return l}),r.d(t,"d",function(){return s}),r.d(t,"a",function(){return o});var a=r("66df"),n=function(e,t){return a["a"].request({url:"rbac/dept/page/"+e,method:"GET",params:t})},u=function(){return a["a"].request({url:"rbac/dept/tree",method:"GET"})},l=function(e){return a["a"].request({url:"rbac/dept/detail/"+e,method:"GET"})},s=function(e){return a["a"].request({url:"rbac/dept/save",method:"POST",data:e})},o=function(e){return a["a"].request({url:"rbac/dept/delete/"+e,method:"DELETE"})}}}]);