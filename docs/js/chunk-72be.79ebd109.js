(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72be"],{"18ee":function(e,t,r){},"31de":function(e,t,r){"use strict";var a=r("18ee"),l=r.n(a);l.a},"7f1d":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticStyle:{"margin-top":"20px"}},[r("Card",[r("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:function(t){e.openEdit(null)}}},[e._v("新增")]),e._v("  \n    ")],1),r("Card",[r("p",{attrs:{slot:"title"},slot:"title"},[e._v("#服务器列表")]),r("div",{staticClass:"moreco-table"},[r("Table",{attrs:{border:"",stripe:"",columns:e.columns,data:e.pageData}})],1),r("Page",{attrs:{current:e.currPage,"page-size":e.pageSize,total:e.totalCount,size:"small","show-sizer":""}})],1)],1),r("Modal",{attrs:{title:"编辑"},model:{value:e.editShow,callback:function(t){e.editShow=t},expression:"editShow"}},[r("Form",{attrs:{model:e.projectObj,"label-width":60}},[r("FormItem",{attrs:{label:"id",hidden:""}},[r("Input",{model:{value:e.projectObj.id,callback:function(t){e.$set(e.projectObj,"id",t)},expression:"projectObj.id"}})],1),r("FormItem",{attrs:{label:"名称"}},[r("Input",{attrs:{placeholder:"请输入名称"},model:{value:e.projectObj.name,callback:function(t){e.$set(e.projectObj,"name",t)},expression:"projectObj.name"}})],1),r("FormItem",{attrs:{label:"编码"}},[r("Input",{attrs:{placeholder:"请输入编码"},model:{value:e.projectObj.code,callback:function(t){e.$set(e.projectObj,"code",t)},expression:"projectObj.code"}})],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{on:{click:e.closeEdit}},[e._v("取消")]),r("Button",{attrs:{type:"primary",loading:e.editLoading},on:{click:e.save}},[e._v("保存")])],1)],1)],1)},l=[],o=(r("cadf"),r("551c"),r("097d"),r("66df")),n=function(e){return o["a"].request({url:"monitor/server/page/"+e,method:"GET"})},i=function(e){return o["a"].request({url:"monitor/server/detail/"+e,method:"GET"})},c=function(e){return o["a"].request({url:"monitor/server/save",method:"POST",data:e})},s=function(e){return o["a"].request({url:"monitor/server/delete/"+e,method:"DELETE"})},d={data:function(){var e=this;return{columns:[{title:"主机",align:"center",children:[{title:"IP",key:"ipAddress"},{title:"操作系统",key:"osName",render:function(e,t){return e("div",null,t.row.dataMap.osName)}},{title:"状态",align:"center",key:"serverStatus",width:100,render:function(e,t){var r=null;switch(t.row.serverStatus){case 0:r="moreco-label label-error";break;case 1:r="moreco-label label-success";break;default:r="moreco-label label-info";break}return e("div",{class:r},t.row.dataMap.serverStatus)}}]},{title:"CPU",align:"center",children:[{title:"核心数",key:"cpuCore",width:100},{title:"占用率",key:"cpuUseRate",width:100,render:function(e,t){var r=Math.floor(t.row.cpuUseRate/25),a=null;switch(r){case 0:a="moreco-label label-success";break;case 1:a="moreco-label label-info";break;case 2:a="moreco-label label-warring";break;case 3:a="moreco-label label-error";break;default:a="moreco-label label-error";break}return e("div",{class:a},t.row.cpuUseRate+"%")}}]},{title:"内存",align:"center",children:[{title:"总数",key:"memTotal",render:function(e,t){return e("div",null,t.row.memTotal+"M")}},{title:"已用",key:"memUsed",render:function(e,t){return e("div",null,t.row.memUsed+"M")}}]},{title:"Agent",align:"center",children:[{title:"心跳时间",key:"heartBeat",render:function(e,t){return e("div",null,t.row.dataMap.heartBeat)}},{title:"状态",align:"center",key:"agentStatus",width:100,render:function(e,t){var r=null;switch(t.row.agentStatus){case 0:r="moreco-label label-error";break;case 1:r="moreco-label label-success";break;default:r="moreco-label label-info";break}return e("div",{class:r},t.row.dataMap.agentStatus)}}]},{title:"报警",align:"center",children:[{title:"性能报警",key:"performanceAlarm",width:100,render:function(e,t){var r=null;switch(t.row.performanceAlarm){case 0:r="moreco-label label-error";break;case 1:r="moreco-label label-success";break;default:r="moreco-label label-info";break}return e("div",{class:r},t.row.dataMap.performanceAlarm)}},{title:"存活报警",key:"aliveAlarm",width:100,render:function(e,t){var r=null;switch(t.row.aliveAlarm){case 0:r="moreco-label label-error";break;case 1:r="moreco-label label-success";break;default:r="moreco-label label-info";break}return e("div",{class:r},t.row.dataMap.aliveAlarm)}}]},{title:"操作",key:"action",width:200,align:"center",fixed:"right",render:function(t,r){return t("div",[t("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.openEdit(r.row.id)}}},"查看详情"),t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.openEdit(r.row.id)}}},"修改"),t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.remove(r.row.id)}}},"删除")])}}],pageData:[],currPage:1,pageSize:10,totalCount:0,editShow:!1,editLoading:!1,projectObj:{}}},methods:{doQuery:function(){var e=this;n(this.currPage).then(function(t){0===t.data.code&&(e.currPage=t.data.result.currPage,e.pageSize=t.data.result.pageSize,e.totalCount=t.data.result.totalCount,e.pageData=t.data.result.list)})},openEdit:function(e){var t=this;null!==e?i(e).then(function(e){0===e.data.code&&(t.deptObj=e.data.result)}):this.deptObj={},this.editShow=!0},closeEdit:function(){this.editShow=!1,this.editLoading=!1},save:function(){var e=this;this.editLoading=!0,c(this.deptObj).then(function(t){0===t.data.code&&(e.editShow=!1,e.doQuery())}).finally(function(){e.editLoading=!1})},remove:function(e){var t=this;s(e).then(function(e){0===e.data.code&&t.doQuery()})}},mounted:function(){this.doQuery()}},u=d,b=(r("31de"),r("2877")),m=Object(b["a"])(u,a,l,!1,null,null,null);m.options.__file="server-list.vue";t["default"]=m.exports}}]);