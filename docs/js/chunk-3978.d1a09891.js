(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3978"],{"7eae":function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"e",function(){return o}),n.d(t,"b",function(){return i}),n.d(t,"d",function(){return u}),n.d(t,"a",function(){return s}),n.d(t,"f",function(){return l});var a=n("66df"),r=function(e,t){return a["a"].request({url:"rbac/menu/page/"+e+"/"+t,method:"GET"})},o=function(){return a["a"].request({url:"rbac/menu/toPage",method:"GET"})},i=function(e){return a["a"].request({url:"rbac/menu/detail/"+e,method:"GET"})},u=function(e){return a["a"].request({url:"rbac/menu/save",method:"POST",data:e})},s=function(e){return a["a"].request({url:"rbac/menu/delete/"+e,method:"DELETE"})},l=function(){return a["a"].request({url:"rbac/menu/tree",method:"GET"})}},"7f8d":function(e,t,n){"use strict";var a=n("b8ae"),r=n.n(a);r.a},b6db:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticStyle:{"margin-top":"20px"}},[n("Card",[n("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:function(t){e.openEdit(null)}}},[e._v("新增")]),e._v("  \n      "),0!==this.parentId?n("Button",{attrs:{type:"success",icon:"ios-arrow-back"},on:{click:function(t){e.goBack()}}},[e._v("返回上级")]):e._e()],1),n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[e._v("#目录列表")]),n("div",{staticClass:"moreco-table"},[n("Table",{attrs:{border:"",stripe:"",columns:e.columns,data:e.pageData}})],1),n("Page",{attrs:{current:e.currPage,"page-size":e.pageSize,total:e.totalCount,size:"small","show-sizer":""}})],1)],1),n("Modal",{attrs:{title:"编辑目录"},model:{value:e.editShow,callback:function(t){e.editShow=t},expression:"editShow"}},[n("Form",{attrs:{model:e.menuObj,"label-width":60}},[n("FormItem",{attrs:{label:"id",hidden:""}},[n("Input",{model:{value:e.menuObj.id,callback:function(t){e.$set(e.menuObj,"id",t)},expression:"menuObj.id"}})],1),n("FormItem",{attrs:{label:"parentId",hidden:""}},[n("Input",{model:{value:e.menuObj.parentId,callback:function(t){e.$set(e.menuObj,"parentId",t)},expression:"menuObj.parentId"}})],1),n("FormItem",{attrs:{label:"上级目录"}},[n("Input",{attrs:{disabled:"disabled"},model:{value:this.parentName,callback:function(t){e.$set(this,"parentName",t)},expression:"this.parentName"}})],1),n("FormItem",{attrs:{label:"名称"}},[n("Input",{attrs:{placeholder:"请输入名称"},model:{value:e.menuObj.name,callback:function(t){e.$set(e.menuObj,"name",t)},expression:"menuObj.name"}})],1),n("FormItem",{attrs:{label:"图标"}},[n("Input",{attrs:{placeholder:"请输入图标"},model:{value:e.menuObj.icon,callback:function(t){e.$set(e.menuObj,"icon",t)},expression:"menuObj.icon"}})],1),n("FormItem",{attrs:{label:"类型"}},[n("Select",{staticStyle:{width:"200px"},model:{value:e.menuObj.type,callback:function(t){e.$set(e.menuObj,"type",t)},expression:"menuObj.type"}},e._l(e.menuTypes,function(t){return n("Option",{key:t.key,attrs:{value:t.key,"aria-selected":"menuObj.type === item.key"}},[e._v(e._s(t.name))])}))],1),n("FormItem",{attrs:{label:"排序"}},[n("Input",{attrs:{placeholder:"请输入排序值"},model:{value:e.menuObj.orderNum,callback:function(t){e.$set(e.menuObj,"orderNum",t)},expression:"menuObj.orderNum"}})],1),n("FormItem",{attrs:{label:"路由"}},[n("Input",{attrs:{placeholder:"请输入路由"},model:{value:e.menuObj.url,callback:function(t){e.$set(e.menuObj,"url",t)},expression:"menuObj.url"}})],1),n("FormItem",{attrs:{label:"授权标识"}},[n("Input",{attrs:{placeholder:"请输入授权标识"},model:{value:e.menuObj.perms,callback:function(t){e.$set(e.menuObj,"perms",t)},expression:"menuObj.perms"}})],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{on:{click:e.closeEdit}},[e._v("取消")]),n("Button",{attrs:{type:"primary",loading:e.editLoading},on:{click:e.save}},[e._v("保存")])],1)],1)],1)},r=[],o=(n("7f7f"),n("cadf"),n("551c"),n("097d"),n("7eae")),i={data:function(){var e=this;return{columns:[{title:"名称",key:"name",fixed:"left"},{title:"图标",key:"icon",render:function(e,t){return e("Icon",{props:{type:t.row.icon,size:24}})}},{title:"类型",key:"type",render:function(e,t){return e("div",{},t.row.dataMap.type)}},{title:"排序",key:"orderNum"},{title:"路由",key:"url"},{title:"授权标识",key:"perms"},{title:"操作",key:"action",width:200,align:"center",fixed:"right",render:function(t,n){return t("div",[t("Button",{props:{type:"success",size:"small"},on:{click:function(){e.parentIdStack.push(e.parentId),e.parentNameStack.push(e.parentName),e.parentId=n.row.id,e.parentName=n.row.name,e.doQuery()}}},"管理下级"),t("span",{}," "),t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.openEdit(n.row.id)}}},"修改"),t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.remove(n.row.id)}}},"删除")])}}],pageData:[],currPage:1,pageSize:10,totalCount:0,editShow:!1,editLoading:!1,menuObj:{},parentId:0,parentName:"顶级目录",parentIdStack:[],parentNameStack:[],menuTypes:[]}},methods:{initPage:function(){var e=this;Object(o["e"])().then(function(t){0===t.data.code&&(e.menuTypes=t.data.result.menuTypes)})},doQuery:function(){var e=this;Object(o["c"])(this.parentId,this.currPage).then(function(t){0===t.data.code&&(e.currPage=t.data.result.currPage,e.pageSize=t.data.result.pageSize,e.totalCount=t.data.result.totalCount,e.pageData=t.data.result.list)})},openEdit:function(e){var t=this;null!==e?Object(o["b"])(e).then(function(e){0===e.data.code&&(t.menuObj=e.data.result)}):this.menuObj={},this.editShow=!0},closeEdit:function(){this.editShow=!1,this.editLoading=!1},save:function(){var e=this;this.editLoading=!0,"undefined"===this.menuObj.parentId&&(this.menuObj.parentId=this.parentId),Object(o["d"])(this.menuObj).then(function(t){e.editLoading=!1,e.editShow=!1,0===t.data.code&&e.doQuery()}).finally(function(){e.editLoading=!1})},remove:function(e){var t=this;Object(o["a"])(e).then(function(e){0===e.data.code&&t.doQuery()})},goBack:function(){this.parentId=this.parentIdStack.pop(),this.parentName=this.parentNameStack.pop(),this.doQuery()}},mounted:function(){this.initPage(),this.doQuery()}},u=i,s=(n("7f8d"),n("2877")),l=Object(s["a"])(u,a,r,!1,null,null,null);l.options.__file="menu.vue";t["default"]=l.exports},b8ae:function(e,t,n){}}]);